{% extends "base.html" %}

{% block title %}
  {{ object }}
{% endblock title %}


{% block content %}

  <div class="section primary-section" id="categories">
    <div class="triangle"></div>
    <div class="container">
      <div class="title">
        <h1>{{ object }}</h1>
        <p>Order some and get it at home</p>
      </div>

      <div class="row-fluid team">
        {% for position in page_obj.object_list %}
          <div class="span4 mg-left0" id="category{{ category.id }}">
            <div class="thumbnail">
              <img src="{{ position.image.url }}" alt="team 1">
              <h3>{{ position.title }}</h3>
              <div class="mask">
                <h2>{{ position.description }}</h2>
                <h2>{{ position.price }}$</h2>
                <form action="{% url 'cart:add-to-cart' position.pk %}" method="post">
                  {% csrf_token %}
                  {{ cart_add_form }}
                  <input type="submit" value="Add to cart" class="btn btn-primary">
                </form>
              </div>
            </div>
          </div>
        {% endfor %}

      </div>

    </div>
  </div>
  <nav aria-label="Page navigation example">
    <ul class="pagination justify-content-center">
      {% if page_obj.has_previous %}
        <li class="page-item">
          <a class="page-link" href="?page=1">First</a>
        </li>
        <li class="page-item">
          <a class="page-link" href="?page={{ page_obj.previous_page_number }}">Previous</a>
        </li>
      {% endif %}

      {% for p in page_obj.paginator.page_range %}
        {% if page_obj.number == p %}
          <li class="page-item active"><a class="page-link disabled" href="#">{{ p }}</a></li>
        {% elif p > page_obj.number|add:-3 and p < page_obj.number|add:3 %}
          <li class="page-item"><a class="page-link" href="?page={{ p }}">{{ p }}</a></li>
        {% endif %}
      {% endfor %}
      {% if page_obj.has_next %}
        <li class="page-item">
          <a class="page-link" href="?page={{ page_obj.next_page_number }}">Next</a>
        </li>
        <li class="page-item">
          <a class="page-link" href="?page={{ page_obj.paginator.num_pages }}">Last</a>
        </li>
      {% endif %}
    </ul>
  </nav>

{% endblock %}